Version 4
SHEET 1 880 1000
WIRE 160 -144 64 -144
WIRE 160 -48 160 -144
WIRE 176 -48 160 -48
WIRE 80 -16 -16 -16
WIRE 176 -16 80 -16
WIRE -1168 48 -1200 48
WIRE -1136 48 -1168 48
WIRE -1008 48 -1040 48
WIRE -976 48 -1008 48
WIRE -800 48 -880 48
WIRE -768 48 -800 48
WIRE 80 48 -16 48
WIRE 176 48 80 48
WIRE -656 64 -704 64
WIRE -768 80 -784 80
WIRE -784 96 -784 80
WIRE -768 96 -784 96
WIRE -784 112 -784 96
WIRE -768 112 -784 112
WIRE -656 112 -656 64
WIRE -640 112 -656 112
WIRE -512 112 -544 112
WIRE -480 112 -512 112
WIRE -352 112 -416 112
WIRE -288 112 -352 112
WIRE -784 128 -784 112
WIRE -768 128 -784 128
WIRE -752 128 -752 112
WIRE -752 128 -768 128
WIRE -1168 160 -1200 160
WIRE -1136 160 -1168 160
WIRE -1008 160 -1040 160
WIRE -976 160 -1008 160
WIRE -800 160 -880 160
WIRE -768 160 -800 160
WIRE -672 176 -704 176
WIRE -640 176 -672 176
WIRE -512 176 -544 176
WIRE -480 176 -512 176
WIRE -352 176 -416 176
WIRE -288 176 -352 176
WIRE -768 192 -784 192
WIRE -784 208 -784 192
WIRE -768 208 -784 208
WIRE -784 224 -784 208
WIRE -768 224 -784 224
WIRE -784 240 -784 224
WIRE -768 240 -784 240
WIRE -752 240 -752 224
WIRE -752 240 -768 240
WIRE 48 304 32 304
WIRE 48 320 48 304
WIRE 48 336 32 336
WIRE 144 336 112 336
WIRE 176 336 144 336
WIRE 192 336 176 336
WIRE 240 336 208 336
WIRE 336 336 240 336
WIRE -912 352 -928 352
WIRE 48 352 32 352
WIRE 336 352 288 352
WIRE 432 352 400 352
WIRE 448 352 432 352
WIRE -912 368 -928 368
WIRE 32 368 32 352
WIRE 48 368 32 368
WIRE 176 368 176 336
WIRE 192 368 176 368
WIRE 240 368 208 368
WIRE 288 368 288 352
WIRE 288 368 240 368
WIRE 336 368 304 368
WIRE 432 368 432 352
WIRE -912 384 -928 384
WIRE -624 384 -640 384
WIRE 32 384 32 368
WIRE 48 384 32 384
WIRE 336 384 320 384
WIRE -912 400 -912 384
WIRE -912 400 -928 400
WIRE -624 400 -624 384
WIRE 32 400 32 384
WIRE 48 400 32 400
WIRE 80 400 80 384
WIRE 80 400 48 400
WIRE 320 400 320 384
WIRE 336 400 320 400
WIRE -912 416 -912 400
WIRE -912 416 -928 416
WIRE -624 416 -640 416
WIRE -528 416 -560 416
WIRE -496 416 -528 416
WIRE -480 416 -496 416
WIRE -432 416 -464 416
WIRE -336 416 -432 416
WIRE 320 416 320 400
WIRE 336 416 320 416
WIRE 352 416 352 400
WIRE 352 416 336 416
WIRE -944 432 -944 416
WIRE -928 432 -944 432
WIRE -912 432 -912 416
WIRE -912 432 -928 432
WIRE -624 432 -640 432
WIRE -336 432 -384 432
WIRE 48 432 32 432
WIRE -640 448 -640 432
WIRE -624 448 -640 448
WIRE -496 448 -496 416
WIRE -480 448 -496 448
WIRE -432 448 -464 448
WIRE -384 448 -384 432
WIRE -384 448 -432 448
WIRE -336 448 -368 448
WIRE 48 448 48 432
WIRE -640 464 -640 448
WIRE -624 464 -640 464
WIRE -336 464 -352 464
WIRE 48 464 32 464
WIRE 128 464 112 464
WIRE -640 480 -640 464
WIRE -624 480 -640 480
WIRE -592 480 -592 464
WIRE -592 480 -624 480
WIRE -352 480 -352 464
WIRE -336 480 -352 480
WIRE 48 480 32 480
WIRE -352 496 -352 480
WIRE -336 496 -352 496
WIRE -320 496 -320 480
WIRE -320 496 -336 496
WIRE 32 496 32 480
WIRE 48 496 32 496
WIRE 304 496 304 368
WIRE 304 496 128 496
WIRE -624 512 -640 512
WIRE 32 512 32 496
WIRE 48 512 32 512
WIRE -912 528 -928 528
WIRE -624 528 -624 512
WIRE 32 528 32 512
WIRE 48 528 32 528
WIRE 80 528 80 512
WIRE 80 528 48 528
WIRE -912 544 -928 544
WIRE -624 544 -640 544
WIRE -544 544 -560 544
WIRE -912 560 -928 560
WIRE -624 560 -640 560
WIRE -912 576 -912 560
WIRE -912 576 -928 576
WIRE -640 576 -640 560
WIRE -624 576 -640 576
WIRE -368 576 -368 448
WIRE -368 576 -544 576
WIRE -912 592 -912 576
WIRE -912 592 -928 592
WIRE -640 592 -640 576
WIRE -624 592 -640 592
WIRE -944 608 -944 592
WIRE -928 608 -944 608
WIRE -912 608 -912 592
WIRE -912 608 -928 608
WIRE -640 608 -640 592
WIRE -624 608 -640 608
WIRE -592 608 -592 592
WIRE -592 608 -624 608
FLAG -352 112 wbin[2:0]
FLAG -512 112 wclk
FLAG -448 128 0
FLAG 80 -16 wmemptr[1:0]
FLAG -352 176 rbin[2:0]
FLAG -512 176 rclk
FLAG -448 192 0
FLAG 80 48 rmemptr[1:0]
FLAG -1264 48 write
IOPIN -1264 48 In
FLAG -1264 160 read
IOPIN -1264 160 In
FLAG -128 -144 din[1:0]
IOPIN -128 -144 In
FLAG 400 16 dout[1:0]
IOPIN 400 16 Out
FLAG -704 96 0
FLAG -768 128 0
FLAG -704 208 0
FLAG -768 240 0
FLAG -400 320 rptr[2:0]
FLAG -400 352 sync_wptr[2:0]
FLAG -336 496 0
FLAG -624 480 0
FLAG -640 416 wptr[2:1]
FLAG -640 384 sync_rptr[2:1]
FLAG -544 448 0
FLAG -624 608 0
FLAG -640 544 wptr[0]
FLAG -640 512 sync_rptr[0]
FLAG -544 544 0
FLAG -528 416 _eq[2:1]
FLAG -432 416 _eq[2]
FLAG -432 448 _eq[1]
FLAG 192 560 wbin[2:0]
FLAG 336 560 $G_fifo_wptr
FLAG 192 624 rbin[2:0]
FLAG 336 624 $G_fifo_rptr
FLAG -1168 336 wptr[2:0]
FLAG -992 336 sync_wptr[2:0]
FLAG -1168 512 rptr[2:0]
FLAG -992 512 sync_rptr[2:0]
FLAG -928 432 0
FLAG -992 400 0
FLAG -1008 48 w2
FLAG -912 544 w2
FLAG -1008 160 r2
FLAG -928 608 0
FLAG -992 576 0
FLAG -912 368 r2
FLAG -800 48 wdly
FLAG -800 160 rdly
FLAG -672 176 rgate
FLAG -656 64 wgate
FLAG -32 -96 0
FLAG 160 -144 dlatch[1:0]
FLAG 272 240 rptr[2:0]
FLAG 272 272 wptr[2:0]
FLAG 400 240 empty
IOPIN 400 240 Out
FLAG 448 352 full
IOPIN 448 352 Out
FLAG 336 416 0
FLAG 48 400 0
FLAG 32 336 wptr[2:1]
FLAG 32 304 rptr[2:1]
FLAG 128 368 0
FLAG 48 528 0
FLAG 32 464 wptr[0]
FLAG 32 432 rptr[0]
FLAG 128 464 0
FLAG 144 336 _eqo[2:1]
FLAG 240 336 _eqo[2]
FLAG 240 368 _eqo[1]
FLAG -272 320 0
FLAG -272 432 0
FLAG -272 464 _sync_full
FLAG -768 64 _sync_full
FLAG -768 176 _sync_empty
FLAG -272 352 _sync_empty
FLAG 400 384 0
FLAG 400 272 0
FLAG 432 448 0
FLAG -80 -16 wbin[1:0]
FLAG -80 48 rbin[1:0]
FLAG -224 112 wptr[2:0]
FLAG -224 176 rptr[2:0]
FLAG 176 16 wgate
FLAG 176 80 rgate
FLAG -128 -112 wdly
FLAG -912 528 w1
FLAG -912 352 r1
FLAG -1168 48 w1
FLAG -1168 160 r1
BUSTAP -480 416 -464 416
BUSTAP -480 448 -464 448
BUSTAP 192 336 208 336
BUSTAP 192 368 208 368
SYMBOL fifo3-mem_2bit_4len 288 16 R0
SYMATTR InstName X1
SYMBOL delay -592 112 R0
WINDOW 39 -2 30 Bottom 0
WINDOW 0 66 30 Bottom 2
SYMATTR SpiceLine tdr=2n
SYMATTR InstName X2
SYMBOL delay -592 176 R0
WINDOW 39 -2 30 Bottom 0
WINDOW 0 66 30 Bottom 2
SYMATTR SpiceLine tdr=2n
SYMATTR InstName X5
SYMBOL Digital\\and -736 16 R0
SYMATTR InstName A1
SYMBOL Digital\\and -736 128 R0
SYMATTR InstName A2
SYMBOL Digital\\and -304 384 R0
SYMATTR InstName A3
SYMBOL Digital\\xor -576 368 R0
WINDOW 0 -8 111 Left 2
SYMATTR InstName A[1:0]
SYMBOL Digital\\xor -576 496 R0
SYMATTR InstName A5
SYMBOL eq-3bit -320 336 R0
SYMATTR InstName X10
SYMBOL dac-3bit-fast 256 560 R0
SYMATTR InstName X11
SYMBOL dac-3bit-fast 256 624 R0
SYMATTR InstName X12
SYMBOL sync-2stage -1088 336 R0
SYMATTR InstName X13
SYMBOL sync-2stage -1088 512 R0
SYMATTR InstName X14
SYMBOL Digital\\or -960 320 M0
WINDOW 0 15 101 Left 2
SYMATTR InstName A6
SYMBOL Digital\\or -960 496 M0
WINDOW 0 15 101 Left 2
SYMATTR InstName A7
SYMBOL delay -1088 48 R0
WINDOW 39 -2 30 Bottom 0
WINDOW 0 -64 42 Bottom 2
SYMATTR SpiceLine tdr=2n
SYMATTR InstName X16
SYMBOL delay -928 48 R0
WINDOW 39 -2 30 Bottom 0
WINDOW 0 3 -15 Bottom 2
SYMATTR SpiceLine tdr=2n
SYMATTR InstName X17
SYMBOL delay -1088 160 R0
WINDOW 39 -2 30 Bottom 0
WINDOW 0 -64 42 Bottom 2
SYMATTR SpiceLine tdr=2n
SYMATTR InstName X19
SYMBOL delay -928 160 R0
WINDOW 39 -2 30 Bottom 0
WINDOW 0 4 -16 Bottom 2
SYMATTR SpiceLine tdr=2n
SYMATTR InstName X20
SYMBOL dbuf_2bit -32 -128 R0
SYMATTR InstName X23
SYMBOL up_3bitcounter -448 112 R0
WINDOW 0 22 -14 Bottom 2
SYMATTR InstName X4
SYMBOL up_3bitcounter -448 176 R0
WINDOW 0 26 -15 Bottom 2
SYMATTR InstName X7
SYMBOL Digital\\and 368 304 R0
SYMATTR InstName A4
SYMBOL Digital\\xor 96 288 R0
WINDOW 0 -8 111 Left 2
SYMATTR InstName A[11:10]
SYMBOL Digital\\xor 96 416 R0
SYMATTR InstName A9
SYMBOL eq-3bit 352 256 R0
SYMATTR InstName X24
SYMBOL res 416 352 R0
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL bin2gray_2bit -48 -16 R0
SYMATTR InstName X3
SYMBOL bin2gray_2bit -48 48 R0
SYMATTR InstName X6
SYMBOL bin2gray_3bit -256 112 R0
SYMATTR InstName X25
SYMBOL bin2gray_3bit -256 176 R0
SYMATTR InstName X26
SYMBOL oneshot -1232 48 R0
WINDOW 39 0 30 Bottom 0
SYMATTR InstName X8
SYMATTR SpiceLine ton=10n
SYMBOL oneshot -1232 160 R0
WINDOW 39 0 30 Bottom 0
SYMATTR InstName X9
SYMATTR SpiceLine ton=10n
TEXT -520 224 Left 0 ;Use 2-bit gray code for memory access but 3-bit gray code for full/empty sync'ing.
